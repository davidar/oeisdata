Nest[ Flatten[# /. {    0 -> {1}, 1 -> {2}, 2 -> {1, 2, 1}  }] &, {1}, 8] (* _Robert G. Wilson v_, May 20 2014 *)