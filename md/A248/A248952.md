# Smallest term in wrecker ball sequence starting with n\.
https://oeis.org/A248952
## JSON
```JSON
[0, 0, -4, 0, -47, -46, 0, -6362, -23, -22, 0, -32, -471, -470, -29, 0, -218, -4843985, -39, -38, -657367, 0, -101, -57, -56, -7609937, -45, -44, 0, -736, -56168428, -3113136, -3113135, -3113134, -3113133, -51, 0, -190, -1213998, -1213997, -495, -62, -61, -60]
```
## Haskell
```Haskell
import Data.IntSet (singleton, member, insert, findMin, findMax)
a248952 n = a248952_list !! n
(a248952_list, a248953_list) = unzip $
   map (\x -> minmax 1 x $ singleton x) [0..] where
   minmax _ 0 s = (findMin s, findMax s)
   minmax k x s = minmax (k + 1) y (insert y s) where
                         y = x + (if (x - j) `member` s then j else -j)
                         j = k * signum x
```
## Python
```Python
#This and sequences A324660-A324692 generated by manipulating this trip function
#spots - positions in order with possible repetition
#flee - positions from which we move away from zero with possible repetition
#stuck - positions from which we move to a spot already visited with possible repetition
def trip(n):
    stucklist = list()
    spotsvisited = [n]
    leavingspots = list()
    turn = 0
    forbidden = {n}
    while n != 0:
        turn += 1
        sign = n // abs(n)
        st = sign * turn
        if n - st not in forbidden:
            n = n - st
        else:
            leavingspots.append(n)
            if n + st in forbidden:
                stucklist.append(n)
            n = n + st
        spotsvisited.append(n)
        forbidden.add(n)
    return {'stuck':stucklist, 'spots':spotsvisited,
                'turns':turn, 'flee':leavingspots}
#Actual sequence
def a(n):
    d = trip(n)
    return min(d['spots'])
# _David Nacin_, Mar 15 2019
```
```Python
def A248952(n):
    return min(A248939_row(n)); # _M. F. Hasler_, Mar 18 2019
```
## C++
```C++
#include<map>
long A248952(long n) { long c=0, s, m=0; for(std::map<long, bool> seen; n; n += seen[n-(s=n>0?c:-c)] ? s:-s) { if(n<m) m=n; seen[n]=true; ++c; } return m; } // _M. F. Hasler_, Mar 18 2019
```
