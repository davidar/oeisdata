# Carmichael numbers: composite numbers k such that a^\(k\-1\) \=\= 1 \(mod k\) for every a coprime to k\.
https://oeis.org/A002997
## JSON
```JSON
[561, 1105, 1729, 2465, 2821, 6601, 8911, 10585, 15841, 29341, 41041, 46657, 52633, 62745, 63973, 75361, 101101, 115921, 126217, 162401, 172081, 188461, 252601, 278545, 294409, 314821, 334153, 340561, 399001, 410041, 449065, 488881, 512461, 530881, 552721]
```
## Maple
```Maple
filter:= proc(n)
  local q;
  if isprime(n) then return false fi;
  if 2 &^ (n-1) mod n <> 1 then return false fi;
  if not numtheory:-issqrfree(n) then return false fi;
  for q in numtheory:-factorset(n) do
    if (n-1) mod (q-1) <> 0 then return false fi
  od:
  true;
end proc:
select(filter, [seq(2*k+1,k=1..10^6)]); # _Robert Israel_, Dec 29 2014
isA002997 := n -> 0 = modp(n-1, numtheory:-lambda(n)) and not isprime(n) and n <> 1:
select(isA002997, [$1..10000]); # _Peter Luschny_, Jul 21 2019
```
## Mathematica
```Mathematica
Cases[Range[1,100000,2], n_ /; Mod[n, CarmichaelLambda[n]] == 1 && ! PrimeQ[n]] (* _Artur Jasinski_, Apr 05 2008; minor edit from _Zak Seidov_, Feb 16 2011 *)
```
```Mathematica
Select[Range[1,600001,2],CompositeQ[#]&&Mod[#,CarmichaelLambda[#]]==1&] (* _Harvey P. Dale_, Jul 08 2023 *)
```
## PARI
```PARI
Korselt(n)=my(f=factor(n));for(i=1,#f[,1],if(f[i,2]>1||(n-1)%(f[i,1]-1),return(0)));1
isA002997(n)=n%2 && !isprime(n) && Korselt(n) && n>1 \\ _Charles R Greathouse IV_, Jun 10 2011
```
```PARI
is_A002997(n, F=factor(n)~)={ #F>2 && !foreach(F,f,(n%(f[1]-1)==1 && f[2]==1) || return)} \\ No need to check parity: if efficiency is needed, scan only odd numbers. - _M. F. Hasler_, Aug 24 2012, edited Mar 24 2022
```
## Haskell
```Haskell
a002997 n = a002997_list !! (n-1)
a002997_list = [x | x <- a024556_list,
all (== 0) $ map ((mod (x - 1)) . (subtract 1)) $ a027748_row x]
-- _Reinhard Zumkeller_, Apr 12 2012
```
## Magma
```Magma
[n: n in [3..53*10^4 by 2] | not IsPrime(n) and n mod CarmichaelLambda(n) eq 1]; // _Bruno Berselli_, Apr 23 2012
```
## Sage
```Sage
def isCarmichael(n):
    if n == 1 or is_even(n) or is_prime(n):
        return False
    factors = factor(n)
    for f in factors:
        if f[1] > 1: return False
        if (n - 1) % (f[0] - 1) != 0:
            return False
    return True
print([n for n in (1..20000) if isCarmichael(n)]) # _Peter Luschny_, Apr 02 2019
```
## Python
```Python
from itertools import islice
from sympy import nextprime, factorint
def A002997_gen(): # generator of terms
    p, q = 3, 5
    while True:
        for n in range(p+2,q,2):
            f = factorint(n)
            if max(f.values()) == 1 and not any((n-1) % (p-1) for p in f):
                yield n
        p, q = q, nextprime(q)
A002997_list = list(islice(A002997_gen(),20)) # _Chai Wah Wu_, May 11 2022
```
