# Let t be the closest triangular number to n\! \(in case n\=2, the only case where we have a tie, take the larger t\); then a\(n\) \= n\! \- t\.
https://oeis.org/A338489
## JSON
```JSON
[0, 0, -1, 0, 3, 0, 17, -10, 134, 354, 1329, 4155, 3924, 19797, -94380, 787794, 2901480, -1907466, 38192984, 204434670, -304139881, 115819260, -12372023755, 6328965122, -397725674235, 1196412908415, 6734756394444, -6589458328753, 48604536424455, -1553224821563460, 2464230045322035]
```
## Mathematica
```Mathematica
ctn[n_]:=Module[{c=Floor[(Sqrt[1+8n!]-1)/2],tr1,tr2,trp},tr1=(c(c+1))/2;tr2=((c+1)(c+2))/2;trp=Nearest[{tr1,tr2},n!];n!-trp]; Join[{0,0,-1},Flatten[Array[ctn,30,3]]] (* _Harvey P. Dale_, Aug 22 2021 *)
```
## PARI
```PARI
a(n) = my(m = sqrtint(2*n!)); n! - m*(m+1)/2; \\ _Michel Marcus_, Nov 09 2020
```
## Python
```Python
from math import factorial, isqrt
def A338489(n): return (f:=factorial(n))-((m:=isqrt(f<<1))*(m+1)>>1) # _Chai Wah Wu_, Aug 04 2022
```
