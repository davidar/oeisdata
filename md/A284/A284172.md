# a\(1\)\=2; thereafter a\(n\+1\) \= a\(n\)\+i if a\(n\) is a prime and a\(1\),\.\.\.,a\(n\) contains i primes, or a\(n\+1\) \= a\(n\)\-i if a\(n\) is composite and a\(1\),\.\.\.,a\(n\) contains i composite terms\.
https://oeis.org/A284172
## JSON
```JSON
[2, 3, 5, 8, 7, 11, 16, 14, 11, 17, 24, 20, 15, 9, 2, 10, 2, 11, 21, 12, 2, 13, 25, 14, 2, 15, 2, 16, 2, 17, 33, 18, 2, 19, 37, 56, 39, 21, 2, 22, 2, 23, 45, 24, 2, 25, 2, 26, 2, 27, 2, 28, 2, 29, 57, 30, 2, 31, 61, 92, 63, 33, 2, 34, 2, 35, 2, 36, 2, 37, 73, 110, 75, 39, 2, 40, 2, 41, 81, 42, 2, 43, 85, 44, 2, 45]
```
## Maple
```Maple
A[1]:= 2: P:= 0;
for n from 1 to 999 do
   if isprime(A[n]) then
      P:= P+1;
      A[n+1]:= A[n]+P;
   elif A[n] <> 1 then
      A[n+1]:= A[n]-(n-P);
     fi
od:
[seq(A[i],i=1..1000)]; # _Robert Israel_, Mar 21 2017
```
## Mathematica
```Mathematica
a = {2};n = 1;i = 1;j = 1;For[n = 1, n < 1000, n++, If[PrimeQ[a[[n]]],AppendTo[a, a[[n]] + i];  i++, AppendTo[a, a[[n]] - j];j++]] (* _Luca Petrone_ *)
```
```Mathematica
(* Second program can generate 2^24 terms in 32 s: *)
```
```Mathematica
Block[{c = 1, m = 2, n}, {2}~Join~Reap[Do[If[PrimeQ[m], Set[n, m + c]; c++, Set[n, m - i + c - 1]]; Sow[n]; m = n, {i, 85}]][[-1, -1]]] (* _Michael De Vlieger_, Oct 20 2021 *)
```
## Python
```Python
from sympy import isprime
a=[2]
p=0
for n in range(1, 1000):
    if isprime(a[n - 1]):
        p+=1
        a.append(a[n - 1] + p)
    else:
        a.append(a[n - 1] - n + p)
print(a) # _Indranil Ghosh_, Mar 22 2017
```
## PARI
```PARI
first(n)=my(v=vector(n),p,c); v[1]=2; for(k=2,n, v[k]=if(isprime(v[k-1]), p++, -c++)+v[k-1]); v \\ _Charles R Greathouse IV_, Mar 22 2017
```
