# The Danish composer Per Nørgård's "infinity sequence", invented in an attempt to unify in a perfect way repetition and variation: a\(2n\) \= \-a\(n\), a\(2n\+1\) \= a\(n\) \+ 1, a\(0\) \= 0\.
https://oeis.org/A004718
## JSON
```JSON
[0, 1, -1, 2, 1, 0, -2, 3, -1, 2, 0, 1, 2, -1, -3, 4, 1, 0, -2, 3, 0, 1, -1, 2, -2, 3, 1, 0, 3, -2, -4, 5, -1, 2, 0, 1, 2, -1, -3, 4, 0, 1, -1, 2, 1, 0, -2, 3, 2, -1, -3, 4, -1, 2, 0, 1, -3, 4, 2, -1, 4, -3, -5, 6, 1, 0, -2, 3, 0, 1, -1, 2, -2, 3, 1, 0, 3, -2, -4, 5, 0, 1, -1, 2, 1, 0]
```
## Maple
```Maple
f:=proc(n) option remember; if n=0 then RETURN(0); fi; if n mod 2 = 0 then RETURN(-f(n/2)); else RETURN(f((n-1)/2)+1); fi; end;
```
## Mathematica
```Mathematica
a[n_?EvenQ] := a[n]= -a[n/2]; a[0]=0; a[n_] := a[n]= a[(n-1)/2]+1; Table[a[n], {n, 0, 85}](* _Jean-François Alcover_, Nov 18 2011 *)
```
```Mathematica
Table[Fold[If[#2 == 0, -#1, #1 + 1] &, IntegerDigits[n, 2]], {n, 0, 85}] (* _Michael De Vlieger_, Jun 30 2016 *)
```
## PARI
```PARI
a=vector(100); a[1]=1; a[2]=-1; for(n=3,#a,a[n]=if(n%2,a[n\2]+1,-a[n\2])); a \\ _Charles R Greathouse IV_, Nov 18 2011
```
## Haskell
```Haskell
import Data.List (transpose)
a004718 n = a004718_list !! n
a004718_list = 0 : concat
   (transpose [map (+ 1) a004718_list, map negate $ tail a004718_list])
-- _Reinhard Zumkeller_, Mar 19 2015, Nov 10 2012
```
## Python
```Python
# from first formula
from functools import reduce
def f(s, b): return s + 1 if b == '1' else -s
def a(n): return reduce(f, [0] + list(bin(n)[2:]))
print([a(n) for n in range(86)]) # _Michael S. Branicky_, Apr 03 2021
```
```Python
# via recursion
from functools import lru_cache
@lru_cache(maxsize=None)
def a(n): return 0 if n == 0 else (a((n-1)//2)+1 if n%2 else -a(n//2))
print([a(n) for n in range(86)]) # _Michael S. Branicky_, Apr 03 2021
```
```Python
from itertools import groupby
def A004718(n):
    c = 0
    for k, g in groupby(bin(n)[2:]):
        c = c+len(list(g)) if k == '1' else (-c if len(list(g))&1 else c)
    return c # _Chai Wah Wu_, Mar 02 2023
```
