# a\(1\)\=2; thereafter a\(n\) is the smallest number \>\= 2 not yet used which is compatible with the condition that a\(n\) is relatively prime to the next n terms\.
https://oeis.org/A247665
## JSON
```JSON
[2, 3, 4, 5, 7, 9, 8, 11, 13, 17, 19, 23, 15, 29, 14, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 25, 27, 79, 83, 16, 49, 89, 97, 101, 103, 107, 109, 113, 121, 127, 131, 137, 139, 149, 151, 157, 163, 167, 169, 173, 179, 181, 191, 85, 193, 57, 197, 199, 211, 223]
```
## PARI
```PARI
m=100; v=vector(m); u=vectorsmall(100*m); for(n=1, m, for(i=2, 10^9, if(!u[i], for(j=(n+1)\2, n-1, if(gcd(v[j], i)>1, next(2))); v[n]=i; u[i]=1; break))); v \\ _Jens Kruse Andersen_, Oct 08 2014
```
## Haskell
```Haskell
a247665 n = a247665_list !! (n-1)
a247665_list = 2 : 3 : f [3] [4..] where
   f (x:xs) zs = ys ++ f (xs ++ ys) (zs \\ ys) where
     ys = [v, head [w | w <- vs, gcd v w == 1]]
     (v:vs) = filter (\u -> gcd u x == 1 && all ((== 1) . (gcd u)) xs) zs
-- _Reinhard Zumkeller_, Oct 09 2014
```
## Sage
```Sage
# s is the starting point (2 in A247665).
def gen(s):
    sequence = [s]
    available = list(range(2,2*s))
    available.pop(available.index(s))
    yield s
    while True:
        available.extend(range(available[-1]+1,next_prime(available[-1])+1))
        for i,e in enumerate(available):
            if all(gcd(e, sequence[j])==1 for j in range(-len(sequence)//2,0)):
                available.pop(i)
                sequence.append(e)
                yield(e)
                break
g = gen(2)
[next(g) for i in range(40)]  # (gets first 40 terms of A247665)
# _Nadia Heninger_, Oct 28 2014
```
## Python
```Python
from itertools import count, islice
from math import gcd
from collections import deque
def A247665_gen(): # generator of terms
    aset, aqueue, c, f = {2}, deque([2]), 3, True
    yield 2
    while True:
        for m in count(c):
            if m not in aset and all(gcd(m,a) == 1 for a in aqueue):
                yield m
                aset.add(m)
                aqueue.append(m)
                if f: aqueue.popleft()
                f = not f
                while c in aset:
                    c += 1
                break
A247665_list = list(islice(A247665_gen(),50)) # _Chai Wah Wu_, May 19 2022
```
