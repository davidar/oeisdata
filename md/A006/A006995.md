# Binary palindromes: numbers whose binary expansion is palindromic\.
https://oeis.org/A006995
## JSON
```JSON
[0, 1, 3, 5, 7, 9, 15, 17, 21, 27, 31, 33, 45, 51, 63, 65, 73, 85, 93, 99, 107, 119, 127, 129, 153, 165, 189, 195, 219, 231, 255, 257, 273, 297, 313, 325, 341, 365, 381, 387, 403, 427, 443, 455, 471, 495, 511, 513, 561, 585, 633, 645, 693, 717, 765, 771, 819, 843]
```
## Maple
```Maple
dmax:= 15; # to get all terms with at most dmax binary digits
revdigs:= proc(n)
  local L, Ln, i;
  L:= convert(n,base,2);
  Ln:= nops(L);
  add(L[i]*2^(Ln-i),i=1..Ln);
end proc;
A:= {0,1}:
for d from 2 to dmax do
  if d::even then
    A:= A union {seq(2^(d/2)*x + revdigs(x),x=2^(d/2-1)..2^(d/2)-1)}
  else
    m:= (d-1)/2;
    B:={seq(2^(m+1)*x + revdigs(x),x=2^(m-1)..2^m-1)};
    A:= A union B union map(`+`,B,2^m)
  fi
od:
A;  # _Robert Israel_, Aug 17 2014
```
## Mathematica
```Mathematica
palQ[n_Integer, base_Integer] := Module[{idn=IntegerDigits[n, base]}, idn==Reverse[idn]]; Select[Range[1000], palQ[ #, 2]&]
```
```Mathematica
Select[ Range[0, 1000], # == IntegerReverse[#, 2] &] (* _Robert G. Wilson v_, Feb 24 2018 *)
```
```Mathematica
Select[Range[0, 1000], PalindromeQ[IntegerDigits[#, 2]]&] (* _Jean-Fran√ßois Alcover_, Mar 01 2018 *)
```
## PARI
```PARI
for(n=0,999,n-subst(Polrev(binary(n)),x,2)||print1(n,",")) \\ _Thomas Buchholz_, Aug 16 2014
```
```PARI
for(n=0,10^3, my(d=digits(n,2)); if(d==Vecrev(d), print1(n,", "))); \\ _Joerg Arndt_, Aug 17 2014
```
```PARI
is_A006995(n)=Vecrev(n=binary(n))==n \\ _M. F. Hasler_, Feb 23 2018
```
```PARI
A006995(n,m=logint(n,2),c=1<<(m-1),a,d)={if(n>=3*c,a=n-3*c;d=2*c^2,a=n-2*c;n%2*c+d=c^2)+sum(k=1,m-2^(n<3*c),if(bittest(a,m-1-k),1<<k+d>>k))+(n>2)} \\ Based on Fischer's smalltalk program. - _M. F. Hasler_, Feb 23 2018
```
## Magma
```Magma
[n: n in [0..850] | Intseq(n,2) eq Reverse(Intseq(n,2))];  // _Bruno Berselli_, Aug 29 2011
```
## Haskell
```Haskell
a006995 n = a006995_list !! (n-1)
a006995_list = 0 : filter ((== 1) . a178225) a005408_list
-- _Reinhard Zumkeller_, Oct 21 2011
```
## Smalltalk
```Smalltalk
A006995
"Answer the n-th binary palindrome
(nonrecursive implementation)"
| m n a b c d k2 |
n := self.
n = 1 ifTrue: [^0].
n = 2 ifTrue: [^1].
m := n integerFloorLog: 2.
c := 2 raisedToInteger: m - 1.
n >= (3 * c)
  ifTrue:
   [a := n - (3 * c).
   d := 2 * c * c.
   b := d + 1.
   k2 := 1.
   1 to: m - 1
    do:
     [:k |
     k2 := 2 * k2.
     b := b + (a * k2 // c \\ 2 * (k2 + (d // k2)))]]
  ifFalse:
   [a := n - (2 * c).
   d := c * c.
   b := d + 1 + (n \\ 2 * c).
   k2 := 1.
   1 to: m - 2
    do:
     [:k |
     k2 := 2 * k2.
     b := b + (a * k2 // c \\ 2 * (k2 + (d // k2)))]].
^b // by _Hieronymus Fischer_, Feb 15 2013
```
## Sage
```Sage
def palgenbase2(): # generator of palindromes in base 2
    yield 0
    x, n, n2 = 1, 1, 2
    while True:
        for y in range(n,n2):
            s = format(y,'b')
            yield int(s+s[-2::-1],2)
        for y in range(n,n2):
            s = format(y,'b')
            yield int(s+s[::-1],2)
        x += 1
        n *= 2
        n2 *= 2 # _Chai Wah Wu_, Jan 07 2015
```
```Sage
[n for n in (0..843) if Word(n.digits(2)).is_palindrome()] # _Peter Luschny_, Sep 13 2018
```
## Python
```Python
from itertools import count, islice, product
def bin_pals(): # generator of binary palindromes in base 10
    yield from [0, 1]
    digits, midrange = 2, [[""], ["0", "1"]]
    for digits in count(2):
        for p in product("01", repeat=digits//2-1):
            left = "1"+"".join(p)
            for middle in midrange[digits%2]:
                yield int(left + middle + left[::-1], 2)
print(list(islice(bin_pals(), 58))) # _Michael S. Branicky_, Jan 09 2023
```
```Python
def A006995(n):
    if n == 1: return 0
    a = 1<<(l:=n.bit_length()-2)
    m = a|(n&a-1)
    return (m<<l+1)+int(bin(m)[-1:1:-1]or'0',2) if a&n else (m<<l)+int(bin(m)[-2:1:-1]or'0',2) # _Chai Wah Wu_, Jun 10 2024
```
