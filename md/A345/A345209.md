# Number of Petrie polygons on the regular triangular map corresponding to the principal congruence subgroup Gamma\(n\) of the modular group\.
https://oeis.org/A345209
## JSON
```JSON
[1, 1, 3, 4, 6, 6, 21, 16, 27, 12, 66, 24, 78, 42, 36, 64, 136, 162, 190, 48, 252, 132, 253, 192, 150, 156, 243, 168, 870, 72, 496, 256, 396, 816, 252, 648, 666, 1140, 468, 384, 1722, 504, 903, 1056, 324, 1518, 3243, 1536, 1029, 300, 816, 624, 1378, 1458, 3960, 1344, 1140, 1740, 1770, 576]
```
## Mathematica
```Mathematica
b[n_] := (n^3/2) Times @@ (1-1/Select[Range[n], Mod[n, #] == 0 && PrimeQ[#]&]^2);
```
```Mathematica
c[n_] := With[{F = Fibonacci}, For[k = 1, True, k++, If[Mod[F[k], n] == 0 && (Mod[F[k+1], n] == 1 || Mod[F[k+1], n] == n-1), Return[k]]]];
```
```Mathematica
a[n_] := If[n<3, 1, b[n]/c[n]];
```
```Mathematica
Array[a, 60] (* _Jean-François Alcover_, Jun 11 2021 *)
```
```Mathematica
Table[((n^3/2^Boole[n > 1]) Product[1 - 1/k^2, {k, Select[Divisors[n], PrimeQ]}])/NestWhile[# + 1 &, 1, ! (Mod[Fibonacci[#], n] == 0 && With[{f = Mod[Fibonacci[# + 1], n]}, f == 1 || f == n - 1]) &], {n, 60}] (* _Jan Mangaldan_, Sep 12 2021 *)
```
## Python
```Python
from sympy import primedivisors
def a(n):
    # degenerate cases
    if n == 1 or n == 2:
        return 1
    # calculate index of Γ(n) in Γ
    index = n**3
    for p in primefactors(n):
        index *= (p**2 - 1)
        index //= p**2
    index //= 2
    # calculate pisano semiperiod
    sigma = 1
    a, b = 1, 1
    while (a,b) != (0,1) and (a,b) != (0, n - 1):
        a, b = b, (a + b) % n
        sigma += 1
    # number of petrie polygons = index / sigma
    return index // sigma
```
