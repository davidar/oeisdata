# a\(1\)\=1\. Thereafter, if a\(n\) has occurred k \(\>1\) times in a\(j\), 1 <\= j <\= n then a\(n\+1\) \= k\*a\(n\)\. If a\(n\) is a first occurrence, a\(n\+1\) \= A078709\(a\(n\)\)\.
https://oeis.org/A353960
## JSON
```JSON
[1, 1, 2, 1, 3, 1, 4, 1, 5, 2, 4, 8, 2, 6, 1, 6, 12, 2, 8, 16, 3, 6, 18, 3, 9, 3, 12, 24, 3, 15, 3, 18, 36, 4, 12, 36, 72, 6, 24, 48, 4, 16, 32, 5, 10, 2, 10, 20, 3, 21, 5, 15, 30, 3, 24, 72, 144, 9, 18, 54, 6, 30, 60, 5, 20, 40, 5, 25, 8, 24, 96, 8, 32, 64, 9, 27, 6, 36, 108, 9]
```
## Mathematica
```Mathematica
nn = 120; c[_] = 0; s = {1}; Table[(Set[a[i], #]; c[#]++) &@ s[[i]], {i, Length[s]}]; Do[If[c[#] == 1, Set[k, Floor[#/DivisorSigma[0, #]]], Set[k, c[#] #]] &@ a[i - 1]; a[i] = k; c[k]++, {i, Length[s] + 1, nn}]; Array[a, nn] (* _Michael De Vlieger_, May 14 2022 *)
```
## PARI
```PARI
f(n) = n\numdiv(n); \\ A078709
lista(nn) = {my(v=vector(nn), k); v[1] = 1; for (n=2, nn, if ((k=#select(x->(x==v[n-1]), Vec(v, n-1))) > 1, v[n] = k*v[n-1], v[n] = f(v[n-1]));); v;} \\ _Michel Marcus_, May 16 2022
```
## Python
```Python
from itertools import islice
from sympy import divisor_count
def A353960_gen(): # generator of terms
    adict, a = {}, 1
    yield a
    while True:
        if a in adict:
            adict[a] += 1
            a *= adict[a]
        else:
            adict[a] = 1
            a //= divisor_count(a)
        yield a
A353960_list = list(islice(A353960_gen(),30)) # _Chai Wah Wu_, Jun 04 2022
```
