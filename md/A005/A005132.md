# RecamÃ¡n's sequence \(or Recaman's sequence\): a\(0\) \= 0; for n \> 0, a\(n\) \= a\(n\-1\) \- n if nonnegative and not already in the sequence, otherwise a\(n\) \= a\(n\-1\) \+ n\.
https://oeis.org/A005132
## JSON
```JSON
[0, 1, 3, 6, 2, 7, 13, 20, 12, 21, 11, 22, 10, 23, 9, 24, 8, 25, 43, 62, 42, 63, 41, 18, 42, 17, 43, 16, 44, 15, 45, 14, 46, 79, 113, 78, 114, 77, 39, 78, 38, 79, 37, 80, 36, 81, 35, 82, 34, 83, 33, 84, 32, 85, 31, 86, 30, 87, 29, 88, 28, 89, 27, 90, 26, 91, 157, 224, 156, 225, 155]
```
## Maple
```Maple
h := array(1..100000); maxt := 100000; a := [1]; ad := [1]; su := []; h[1] := 1; for nx from 2 to 500 do t1 := a[nx-1]-nx; if t1>0 and h[t1] <> 1 then su := [op(su), nx]; else t1 := a[nx-1]+nx; ad := [op(ad), nx]; fi; a := [op(a),t1]; if t1 <= maxt then h[t1] := 1; fi; od: # a is A005132, ad is A057165, su is A057166
A005132 := proc(n)
    option remember; local a, found, j;
    if n = 0 then return 0 fi;
    a := procname(n-1) - n ;
    if a <= 0 then return a+2*n fi;
    found := false;
    for j from 0 to n-1 while not found do
        found := procname(j) = a;
    od;
    if found then a+2*n else a fi;
end:
seq(A005132(n), n=0..70); # _R. J. Mathar_, Apr 01 2012 (reformatted by _Peter Luschny_, Jan 06 2019)
```
## Mathematica
```Mathematica
a = {1}; Do[ If[ a[ [ -1 ] ] - n > 0 && Position[ a, a[ [ -1 ] ] - n ] == {}, a = Append[ a, a[ [ -1 ] ] - n ], a = Append[ a, a[ [ -1 ] ] + n ] ], {n, 2, 70} ]; a
```
```Mathematica
(* Second program: *)
```
```Mathematica
f[s_List] := Block[{a = s[[ -1]], len = Length@s}, Append[s, If[a > len && !MemberQ[s, a - len], a - len, a + len]]]; Nest[f, {0}, 70] (* _Robert G. Wilson v_, May 01 2009 *)
```
## PARI
```PARI
a(n)=if(n<2,1,if(abs(sign(a(n-1)-n)-1)+setsearch(Set(vector(n-1,i,a(i))),a(n-1)-n),a(n-1)+n,a(n-1)-n))  \\ _Benoit Cloitre_
```
```PARI
A005132(N=1000,show=0)={ my(s,t); for(n=1,N, s=bitor(s,1<<t += if( t<=n || bittest(s, t-n), n, -n)); show&&print1(t","));t} \\ _M. F. Hasler_, May 11 2008, updated _M. F. Hasler_, Nov 03 2014
```
## MATLAB
```MATLAB
function a=A005132(m)
% m=max number of terms in a(n). Offset n:0
a=zeros(1,m);
for n=2:m
    B=a(n-1)-(n-1);
    C=0.^( abs(B+1) + (B+1) );
    D=ismember(B,a(1:n-1));
    a(n)=a(n-1)+ (n-1) * (-1)^(C + D -1);
end
% _Adriano Caroli_, Dec 26 2010
```
## Haskell
```Haskell
import Data.Set (Set, singleton, notMember, insert)
a005132 n = a005132_list !! n
a005132_list = 0 : recaman (singleton 0) 1 0 where
   recaman :: Set Integer -> Integer -> Integer -> [Integer]
   recaman s n x = if x > n && (x - n) `notMember` s
                      then (x-n) : recaman (insert (x-n) s) (n+1) (x-n)
                      else (x+n) : recaman (insert (x+n) s) (n+1) (x+n)
-- _Reinhard Zumkeller_, Mar 14 2011
```
## Python
```Python
l=[0]
for n in range(1, 101):
    x=l[n - 1] - n
    if x>0 and not x in l: l+=[x, ]
    else: l+=[l[n - 1] + n]
print(l) # _Indranil Ghosh_, Jun 01 2017
```
```Python
def recaman(n):
  seq = []
  for i in range(n):
    if(i == 0): x = 0
    else: x = seq[i-1]-i
    if(x>=0 and x not in seq): seq+=[x]
    else: seq+=[seq[i-1]+i]
  return seq
print(recaman(1000)) # _Ely Golden_, Jun 14 2018
```
```Python
from itertools import count, islice
def A005132_gen(): # generator of terms
    a, aset = 0, set()
    for n in count(1):
        yield a
        aset.add(a)
        a = b if (b:=a-n)>=0 and b not in aset else a+n
A005132_list = list(islice(A005132_gen(),30)) # _Chai Wah Wu_, Sep 15 2022
```
