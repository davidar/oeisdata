# Number of flat partitions of n: partitions \{a\_i\} with each \|a\_i \- a\_\{i\-1\}\| <\= 1\.
https://oeis.org/A034296
## JSON
```JSON
[1, 1, 2, 3, 4, 5, 7, 8, 10, 13, 15, 18, 23, 26, 31, 39, 44, 52, 63, 72, 85, 101, 115, 134, 158, 181, 208, 243, 277, 318, 369, 418, 478, 549, 622, 710, 809, 914, 1036, 1177, 1328, 1498, 1695, 1904, 2143, 2416, 2706, 3036, 3408, 3811, 4264, 4769, 5319, 5934, 6621]
```
## Maple
```Maple
g:= 1+sum(x^j*product(1+x^i, i=1..j-1)/(1-x^j), j=1..60): gser:=series(g, x=0, 55): seq(coeff(gser, x, n), n=0..50); # _Emeric Deutsch_, Feb 23 2006
# second Maple program:
b:= proc(n, i) option remember;
      `if`(n=0, 1, `if`(i<1, 0, add(b(n-i*j, i-1), j=1..n/i)))
    end:
a:= n-> add(b(n, k), k=0..n):
seq(a(n), n=0..70);  # _Alois P. Heinz_, Jul 06 2012
```
## Mathematica
```Mathematica
nn=54;Drop[CoefficientList[Series[Sum[x^i/(1-x^i)Product[1+x^j,{j,1,i-1}],{i,1,nn}],{x,0,nn}],x],1] (* _Geoffrey Critzer_, Sep 28 2013 *)
```
```Mathematica
b[n_, i_] := b[n, i] = If[n==0, 1, If[i<1, 0, Sum[b[n-i*j, i-1], {j, 1, n/i}]]]; a[n_] := Sum[b[n, k], {k, 1, n}]; Table[a[n], {n, 1, 70}] (* _Jean-FranÃ§ois Alcover_, Mar 24 2015, after _Alois P. Heinz_ *)
```
```Mathematica
a[ n_] := SeriesCoefficient[ Sum[ x^k / (1 - x^k) QPochhammer[ -x, x, k - 1] // FunctionExpand, {k, n}], {x, 0, n}]; (* _Michael Somos_, Aug 07 2017 *)
```
## PARI
```PARI
N = 66;  x = 'x + O('x^N);
gf = sum(n=1,N, x^n/(1-x^n) * prod(k=1,n-1,1+x^k) );
v = Vec(gf)
/* _Joerg Arndt_, Apr 21 2013 */
```
```PARI
{a(n) = my(t); if( n<1, 0, polcoeff(sum(k=1, n, (t *= 1 + x^k) * x^k / (1 - x^(2*k)), t = 1 + x * O(x^n)), n))}; /* _Michael Somos_, Aug 07 2017 */
```
```PARI
{a(n) = my(c); forpart(p=n, c++; for(i=1, #p-1, if( p[i+1] > p[i] + 1, c--; break))); c}; /* _Michael Somos_, Aug 13 2017 */
```
## Python
```Python
from sympy.core.cache import cacheit
@cacheit
def b(n, i): return 1 if n==0 else 0 if i<1 else sum(b(n - i*j, i - 1) for j in range(1, n//i + 1))
def a(n): return sum(b(n, k) for k in range(n + 1))
print([a(n) for n in range(71)]) # _Indranil Ghosh_, Aug 14 2017, after Maple code by _Alois P. Heinz_
```
