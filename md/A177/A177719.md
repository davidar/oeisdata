# Number of line segments connecting exactly 3 points in an n X n grid of points
https://oeis.org/A177719
## JSON
```JSON
[0, 0, 8, 24, 60, 112, 212, 344, 548, 800, 1196, 1672, 2284, 2992, 3988, 5128, 6556, 8160, 10180, 12424, 15068, 17968, 21604, 25576, 30092, 34976, 40900, 47288, 54500, 62224, 70972, 80296, 90740, 101824, 114700, 128344, 143212, 158896, 176836]
```
## Mathematica
```Mathematica
j=2;
```
```Mathematica
a[n_]:=a[n]=If[n<=j,0,2*a1[n]-a[n-1]+R1[n]]
```
```Mathematica
a1[n_]:=a1[n]=If[n<=j,0,2*a[n-1]-a1[n-1]+R2[n]]
```
```Mathematica
R1[n_]:=R1[n]=If[n<=j,0,R1[n-1]+4*S[n]]
```
```Mathematica
R2[n_]:=(n-1)*S[n]
```
```Mathematica
S[n_]:=If[Mod[n-1,j]==0,EulerPhi[(n-1)/j],0]
```
```Mathematica
Table[a[n],{n,1,50}]
```
## PARI
```PARI
{ A177719(n) = if(n<2, return(0)); 2*(n*(n-2) + sum(i=1,n-1,sum(j=1,n-1, (gcd(i,j)==2)*(n-i)*(n-j))) ); } \\ _Max Alekseyev_, Jul 08 2019
```
## Python
```Python
from sympy import totient
def A177719(n): return 4*((n-1)*(n-2) + sum(totient(i)*(n-2*i)*(n-i) for i in range(2,n//2+1))) # _Chai Wah Wu_, Aug 18 2021
```
