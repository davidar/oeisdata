# Sum of balanced ternary digits in n\. Replace 3^k with 1 in balanced ternary expansion of n\.
https://oeis.org/A065363
## JSON
```JSON
[0, 1, 0, 1, 2, -1, 0, 1, 0, 1, 2, 1, 2, 3, -2, -1, 0, -1, 0, 1, 0, 1, 2, -1, 0, 1, 0, 1, 2, 1, 2, 3, 0, 1, 2, 1, 2, 3, 2, 3, 4, -3, -2, -1, -2, -1, 0, -1, 0, 1, -2, -1, 0, -1, 0, 1, 0, 1, 2, -1, 0, 1, 0, 1, 2, 1, 2, 3, -2, -1, 0, -1, 0, 1, 0, 1, 2, -1, 0, 1, 0, 1, 2, 1, 2, 3, 0, 1, 2, 1, 2, 3, 2, 3, 4, -1, 0, 1, 0, 1, 2, 1, 2, 3, 0, 1, 2, 1, 2]
```
## Maple
```Maple
a:= proc(n) `if`(n=0, 0, (d-> `if`(d=2,
      a(q+1)-1, d+a(q)))(irem(n, 3, 'q')))
    end:
seq(a(n), n=0..120);  # _Alois P. Heinz_, Jan 09 2020
```
## Mathematica
```Mathematica
balTernDigits[0] := {0}; balTernDigits[n_/;n > 0] := Module[{unParsed = n, currRem, currExp = 1, digitList = {}, nextDigit}, While[unParsed > 0, If[unParsed == 3^(currExp - 1), digitList = Append[digitList, 1]; unParsed = 0, currRem = Mod[unParsed, 3^currExp]/3^(currExp - 1); nextDigit = Switch[currRem, 0, 0, 2, -1, 1, 1]; digitList = Append[digitList, nextDigit]; unParsed = unParsed - nextDigit * 3^(currExp - 1)]; currExp++]; digitList = Reverse[digitList]; Return[digitList]]; balTernDigits[n_/;n < 0] := (-1)balTernDigits[Abs[n]]; Table[Plus@@balTernDigits[n], {n, 0, 108}] (* _Alonso del Arte_, Feb 25 2011 *)
```
```Mathematica
terVal[lst_List] := Reverse[lst].(3^Range[0, Length[lst] - 1]); maxDig = 4; t = Table[0, {3 * 3^maxDig/2}]; t[[1]] = 1; Do[d = IntegerDigits[Range[0, 3^dig - 1], 3, dig]/.{2 -> -1}; d = Prepend[#, 1]&/@d; t[[terVal/@d]] = Total/@d, {dig, maxDig}]; Prepend[t, 0] (* _T. D. Noe_, Feb 24 2011 *)
```
```Mathematica
Array[Total[Prepend[IntegerDigits[#, 3], 0] //. {a___, b_, 2, c___} :> {a, b + 1, -1, c}] &, 109, 0] (* _Michael De Vlieger_, Jun 27 2020 *)
```
## Python
```Python
def a(n):
    s=0
    x=0
    while n>0:
        x=n%3
        n=n//3
        if x==2:
            x=-1
            n+=1
        s+=x
    return s
print([a(n) for n in range(101)]) # _Indranil Ghosh_, Jun 06 2017
```
## PARI
```PARI
bt(n)=my(d=digits(n,3),c=1); while(c, if(d[1]==2, d=concat(0,d)); c=0; for(i=2,#d, if(d[i]==2,d[i]=-1;d[i-1]+=1;c=1))); d
a(n)=vecsum(bt(n)) \\ _Charles R Greathouse IV_, May 07 2020
```
