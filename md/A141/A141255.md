# Total number of line segments between points visible to each other in a square n X n lattice\.
https://oeis.org/A141255
## JSON
```JSON
[0, 6, 28, 86, 200, 418, 748, 1282, 2040, 3106, 4492, 6394, 8744, 11822, 15556, 20074, 25456, 32086, 39724, 48934, 59456, 71554, 85252, 101250, 119040, 139350, 161932, 187254, 215136, 246690, 280916, 319346, 361328, 407302, 457180, 511714, 570232]
```
## Mathematica
```Mathematica
Table[cnt=0; Do[If[GCD[c-a,d-b]<2, cnt++ ], {a,n}, {b,n}, {c,n}, {d,n}]; (cnt-n^2)/2, {n,20}]
```
```Mathematica
(* This recursive code is much more efficient. *)
```
```Mathematica
a[n_]:=a[n]=If[n<=1,0,2*a1[n]-a[n-1]+R1[n]]
```
```Mathematica
a1[n_]:=a1[n]=If[n<=1,0,2*a[n-1]-a1[n-1]+R2[n]]
```
```Mathematica
R1[n_]:=R1[n]=If[n<=1,0,R1[n-1]+4*EulerPhi[n-1]]
```
```Mathematica
R2[n_]:=(n-1)*EulerPhi[n-1]
```
```Mathematica
Table[a[n],{n,1,37}]
```
```Mathematica
(* _Seppo Mustonen_, May 13 2010 *)
```
```Mathematica
a[n_]:=2 Sum[(n-i) (n-j) Boole[CoprimeQ[i,j]], {i,1,n-1}, {j,1,n-1}] + 2 n^2 - 2 n; Array[a, 40] (* _Vincenzo Librandi_, Feb 05 2020 *)
```
## Python
```Python
from sympy import totient
def A141255(n): return 2*(n-1)*(2*n-1) + 2*sum(totient(i)*(n-i)*(2*n-i) for i in range(2,n)) # _Chai Wah Wu_, Aug 16 2021
```
