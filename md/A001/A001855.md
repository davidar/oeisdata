# Sorting numbers: maximal number of comparisons for sorting n elements by binary insertion\.
https://oeis.org/A001855
## JSON
```JSON
[0, 1, 3, 5, 8, 11, 14, 17, 21, 25, 29, 33, 37, 41, 45, 49, 54, 59, 64, 69, 74, 79, 84, 89, 94, 99, 104, 109, 114, 119, 124, 129, 135, 141, 147, 153, 159, 165, 171, 177, 183, 189, 195, 201, 207, 213, 219, 225, 231, 237, 243, 249, 255, 261, 267, 273, 279, 285]
```
## Maple
```Maple
a := proc(n) local k; k := ilog2(n) + 1; 1 + n*k - 2^k end; # _N. J. A. Sloane_, Dec 01 2007 [edited by _Peter Luschny_, Nov 30 2017]
```
## Mathematica
```Mathematica
a[n_?EvenQ] := a[n] = n + 2a[n/2] - 1; a[n_?OddQ] := a[n] = n + a[(n+1)/2] + a[(n-1)/2] - 1; a[1] = 0; a[2] = 1; Table[a[n], {n, 1, 58}] (* _Jean-Fran√ßois Alcover_, Nov 23 2011, after Pari *)
```
```Mathematica
a[n_] := n IntegerLength[n, 2] - 2^IntegerLength[n, 2] + 1;
```
```Mathematica
Table[a[n], {n, 1, 58}] (* _Peter Luschny_, Dec 02 2017 *)
```
```Mathematica
Accumulate[BitLength[Range[0, 100]]] (* _Paolo Xausa_, Sep 30 2024 *)
```
## PARI
```PARI
a(n)=if(n<2,0,n-1+a(n\2)+a((n+1)\2))
```
```PARI
a(n)=local(m);if(n<2,0,m=length(binary(n-1));n*m-2^m+1)
```
## Haskell
```Haskell
import Data.List (transpose)
a001855 n = a001855_list !! n
a001855_list = 0 : zipWith (+) [1..] (zipWith (+) hs $ tail hs) where
   hs = concat $ transpose [a001855_list, a001855_list]
-- _Reinhard Zumkeller_, Jun 03 2013
```
## Python
```Python
def A001855(n):
    s, i, z = 0, n-1, 1
    while 0 <= i: s += i; i -= z; z += z
    return s
print([A001855(n) for n in range(1, 59)]) # _Peter Luschny_, Nov 30 2017
```
```Python
def A001855(n): return n*(m:=(n-1).bit_length())-(1<<m)+1 # _Chai Wah Wu_, Mar 29 2023
```
