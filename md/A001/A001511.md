# The ruler function: exponent of the highest power of 2 dividing 2n\. Equivalently,  the 2\-adic valuation of 2n\.
https://oeis.org/A001511
## JSON
```JSON
[1, 2, 1, 3, 1, 2, 1, 4, 1, 2, 1, 3, 1, 2, 1, 5, 1, 2, 1, 3, 1, 2, 1, 4, 1, 2, 1, 3, 1, 2, 1, 6, 1, 2, 1, 3, 1, 2, 1, 4, 1, 2, 1, 3, 1, 2, 1, 5, 1, 2, 1, 3, 1, 2, 1, 4, 1, 2, 1, 3, 1, 2, 1, 7, 1, 2, 1, 3, 1, 2, 1, 4, 1, 2, 1, 3, 1, 2, 1, 5, 1, 2, 1, 3, 1, 2, 1, 4, 1, 2, 1, 3, 1, 2, 1, 6, 1, 2, 1, 3, 1, 2, 1, 4, 1]
```
## Maple
```Maple
A001511 := n->2-wt(n)+wt(n-1); # where wt is defined in A000120
# This is the binary logarithm of the denominator of (256^n-1)B_{8n}/n, in Maple parlance a := n -> log[2](denom((256^n-1)*bernoulli(8*n)/n)). - _Peter Luschny_, May 31 2009
A001511 := n -> padic[ordp](2*n,2): seq(A001511(n), n=1..105);  # _Peter Luschny_, Nov 26 2010
a:= n-> ilog2((Bits[Xor](2*n, 2*n-1)+1)/2): seq(a(n), n=1..50);  # _Gary Detlefs_, Dec 13 2018
```
## Mathematica
```Mathematica
Array[ If[ Mod[ #, 2] == 0, FactorInteger[ # ][[1, 2]], 0] &, 105] + 1 (* or *)
```
```Mathematica
Nest[ Flatten[ # /. a_Integer -> {1, a + 1}] &, {1}, 7] (* _Robert G. Wilson v_, Mar 04 2005 *)
```
```Mathematica
IntegerExponent[2*n, 2] (* _Alexander R. Povolotsky_, Aug 19, 2011 *)
```
```Mathematica
myHammingDistance[n_, m_] := Module[{g = Max[m, n], h = Min[m, n]}, b1 = IntegerDigits[g, 2]; b2 = IntegerDigits[h, 2, Length[b1]]; HammingDistance[b1, b2]] (* _Vladimir Shevelev_ A206853 *) Table[ myHammingDistance[n, n - 1], {n, 111}] (* _Robert G. Wilson v_, Apr 05 2012 *)
```
```Mathematica
Table[Position[Reverse[IntegerDigits[n,2]],1,1,1],{n,110}]//Flatten (* _Harvey P. Dale_, Aug 18 2017 *)
```
## PARI
```PARI
a(n) = sum(k=0,floor(log(n)/log(2)),floor(n/2^k)-floor((n-1)/2^k)) /* _Ralf Stephan_ */
```
```PARI
a(n)=if(n%2,1,factor(n)[1,2]+1) /* _Jon Perry_, Jun 06 2004 */
```
```PARI
{a(n) = if( n, valuation(n, 2) + 1, 0)}; /* _Michael Somos_, Sep 30 2006 */
```
```PARI
{a(n)=if(n==1,1,polcoeff(x-sum(k=1, n-1, a(k)*x^k*(1-x^k)*(1-x+x*O(x^n))), n))} /* _Paul D. Hanna_, Jun 22 2007 */
```
## Haskell
```Haskell
a001511 n = length $ takeWhile ((== 0) . (mod n)) a000079_list
-- _Reinhard Zumkeller_, Sep 27 2011
```
```Haskell
a001511 n | odd n = 1 | otherwise = 1 + a001511 (n `div` 2)
-- _Walt Rorie-Baety_, Mar 22 2013
```
## Sage
```Sage
[valuation(2*n,2) for n in (1..105)]  # _Bruno Berselli_, Nov 23 2015
```
## Magma
```Magma
[Valuation(2*n,2): n in [1..105]]; // _Bruno Berselli_, Nov 23 2015
```
## MATLAB
```MATLAB
nmax=5;r=1;for n=2:nmax;r=[r n r];end % _Adriano Caroli_, Feb 26 2016
```
## Python
```Python
def a(n): return bin(n)[2:][::-1].index("1") + 1 # _Indranil Ghosh_, May 11 2017
```
```Python
A001511 = lambda n: (n&-n).bit_length() # _M. F. Hasler_, Apr 09 2020
```
```Python
def A001511(n): return (~n & n-1).bit_length()+1 # _Chai Wah Wu_, Jul 01 2022
```
## Scheme
```Scheme
(define (A001511 n) (let loop ((n n) (e 1)) (if (odd? n) e (loop (/ n 2) (+ 1 e))))) ;; _Antti Karttunen_, Oct 06 2017
```
