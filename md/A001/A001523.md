# Number of stacks, or planar partitions of n; also weakly unimodal compositions of n\.
https://oeis.org/A001523
## JSON
```JSON
[1, 1, 2, 4, 8, 15, 27, 47, 79, 130, 209, 330, 512, 784, 1183, 1765, 2604, 3804, 5504, 7898, 11240, 15880, 22277, 31048, 43003, 59220, 81098, 110484, 149769, 202070, 271404, 362974, 483439, 641368, 847681, 1116325, 1464999, 1916184, 2498258, 3247088, 4207764]
```
## Maple
```Maple
b:= proc(n, i) option remember;
      `if`(i>n, 0, `if`(irem(n, i)=0, 1, 0)+
      add(b(n-i*j, i+1)*(j+1), j=0..n/i))
    end:
a:= n-> `if`(n=0, 1, b(n, 1)):
seq(a(n), n=0..60);  # _Alois P. Heinz_, Mar 26 2014
```
## Mathematica
```Mathematica
max = 40; s = 1 + Sum[(-1)^(k + 1)*q^(k*(k + 1)/2), {k, 1, max}] / QPochhammer[q]^2 + O[q]^max; CoefficientList[s, q] (* _Jean-François Alcover_, Jan 25 2012, updated Nov 29 2015 *)
```
```Mathematica
b[n_, i_] := b[n, i] = If[i>n, 0, If[Mod[n, i]==0, 1, 0] + Sum[b[n-i*j, i+1]*(j+1), {j, 0, n/i}]]; a[n_] := If[n==0, 1, b[n, 1]]; Table[a[n], {n, 0, 60}] (* _Jean-François Alcover_, Nov 24 2015, after _Alois P. Heinz_ *)
```
```Mathematica
unimodQ[q_]:=Or[Length[q]<=1,If[q[[1]]<=q[[2]],unimodQ[Rest[q]],OrderedQ[Reverse[q]]]];
```
```Mathematica
Table[Length[Select[Join@@Permutations/@IntegerPartitions[n],unimodQ[#]&]],{n,0,10}] (* _Gus Wiseman_, Mar 04 2020 *)
```
## PARI
```PARI
{a(n) = if( n<1, n==0, polcoeff( sum(k=1, (sqrt(1 + 8*n) - 1)\2, -(-1)^k * x^((k + k^2)/2)) / eta(x + x * O(x^n))^2 ,n))}; /* _Michael Somos_, Jul 22 2003 */
```
## Python
```Python
def b(n, i):
    if i>n: return 0
    if n%i==0: x=1
    else: x=0
    return x + sum([b(n - i*j, i + 1)*(j + 1) for j in range(n//i + 1)])
def a(n): return 1 if n==0 else b(n, 1) # _Indranil Ghosh_, Jun 09 2017, after Maple code by _Alois P. Heinz_
```
## Magma
```Magma
m:=100;
R<x>:=PowerSeriesRing(Integers(), m);
Coefficients(R!( 1 + (&+[ x^n*(1-x^n)/(&*[(1-x^j)^2: j in [1..n]]): n in [1..m+2]]) )); // _G. C. Greubel_, Apr 03 2023
```
