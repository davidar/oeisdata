# Van Eck's sequence: For n \>\= 1, if there exists an m < n such that a\(m\) \= a\(n\), take the largest such m and set a\(n\+1\) \= n\-m; otherwise a\(n\+1\) \= 0\. Start with a\(1\)\=0\.
https://oeis.org/A181391
## JSON
```JSON
[0, 0, 1, 0, 2, 0, 2, 2, 1, 6, 0, 5, 0, 2, 6, 5, 4, 0, 5, 3, 0, 3, 2, 9, 0, 4, 9, 3, 6, 14, 0, 6, 3, 5, 15, 0, 5, 3, 5, 2, 17, 0, 6, 11, 0, 3, 8, 0, 3, 3, 1, 42, 0, 5, 15, 20, 0, 4, 32, 0, 3, 11, 18, 0, 4, 7, 0, 3, 7, 3, 2, 31, 0, 6, 31, 3, 6, 3, 2, 8, 33, 0, 9, 56, 0, 3, 8, 7, 19, 0, 5, 37, 0, 3, 8, 8, 1]
```
## Maple
```Maple
M:=10000;
a:=Array(1..M);
last:=Array(0..M,-1);
a[1]:=0;
a[2]:=0;
last[0]:=2;
nxt:=1;
for n from 3 to M do
hist:=last[nxt];
a[n]:=nxt;
last[nxt]:=n;
nxt:=0;
if hist>0 then nxt:=n-hist; fi;
od:
[seq(a[n],n=1..M)];
# _N. J. A. Sloane_, Oct 18 2010
```
## Mathematica
```Mathematica
m = 100; ClearAll[a, last]; a[_] = 0; last[_] = -1; last[0] = 2; nxt = 1; Do[ hist = last[nxt]; a[n] = nxt; last[nxt] = n; nxt = 0; If[ hist > 0 , nxt = n - hist], {n, 3, m}]; Table[a[n], {n, 1, m}] (* _Jean-FranÃ§ois Alcover_, Dec 01 2011, after Maple program by _N. J. A. Sloane_ *)
```
```Mathematica
A181391L = Nest[# /. {{Longest[p___], a_, q___, a_} :> {p, a, q, a, Length[{a, q}]}, {a___} :> {a, 0}} &, {}, #] &; A181391L[97] (* _JungHwan Min_, Jan 14 2017 *)
```
## J
```J
NB. see www.Jsoftware.com
(,  # <:@- }:  i: {:)^:({.`}.) 100 0 NB. _Arie Bos_, Dec 10 2010
```
## Haskell
```Haskell
import Data.List (findIndex, unfoldr)
import Data.Maybe (fromMaybe)
a181391 n = a181391_list !! (n-1)
a181391_list = 0 : (unfoldr g [0]) where
   g xs = Just (m, m : xs) where
        m = 1 + fromMaybe (-1) (findIndex (== head xs) $ tail xs)
-- _Reinhard Zumkeller_, Oct 31 2011
```
## Python
```Python
A181391 = [0,0]
for n in range(1,10**4):
    for m in range(n-1,-1,-1):
        if A181391[m] == A181391[n]:
            A181391.append(n-m)
            break
    else:
        A181391.append(0) # _Chai Wah Wu_, Aug 14 2014
```
```Python
A181391 = [0]
last_pos = {}
for i in range(10**4):
    new_value = i - last_pos.get(A181391[i], i)
    A181391.append(new_value)
    last_pos[A181391[i]] = i
# _Ehsan Kia_, Jun 12 2019
```
## Julia
```Julia
function A181391(len)
    L = [0, 0]
    for n in 2:len
        k = findlast(m -> L[n] == L[m], 1:n-1)
        push!(L, k == nothing ? 0 : n - k)
    end
L end
println(A181391(96)) # _Peter Luschny_, May 19 2019
```
## PARI
```PARI
A181391_vec(N,a=0,i=Map())={vector(N,n,a=if(n>1,iferr(n-mapget(i,a),E,0)+mapput(i,a,n)))} \\ _M. F. Hasler_, Jun 11 2019
```
## R
```R
vaneckw <-function(howmany = 100){
howmany = round(howmany[1])
ve = c(0,0)
for (jj in 2:(howmany)) {
thefind <- which(ve[1:(jj-1)] == ve[jj])
if (length(thefind)){
ve <- c(ve,jj-thefind[length(thefind)])
} else ve <- c(ve,0)
}
return(invisible(ve))
} #_Carl Witthoft_, Jun 14 2019
```
