# Lucky numbers\.
https://oeis.org/A000959
## JSON
```JSON
[1, 3, 7, 9, 13, 15, 21, 25, 31, 33, 37, 43, 49, 51, 63, 67, 69, 73, 75, 79, 87, 93, 99, 105, 111, 115, 127, 129, 133, 135, 141, 151, 159, 163, 169, 171, 189, 193, 195, 201, 205, 211, 219, 223, 231, 235, 237, 241, 259, 261, 267, 273, 283, 285, 289, 297, 303]
```
## Maple
```Maple
## luckynumbers(n) returns all lucky numbers from 1 to n. ## Try n=10^5 just for fun. luckynumbers:=proc(n) local k, Lnext, Lprev; Lprev:=[$1..n]; for k from 1 do if k=1 or k=2 then Lnext:= map(w-> Lprev[w],remove(z -> z mod Lprev[2] = 0,[$1..nops(Lprev)])); if nops(Lnext)=nops(Lprev) then break fi; Lprev:=Lnext; else Lnext:= map(w-> Lprev[w],remove(z -> z mod Lprev[k] = 0,[$1..nops(Lprev)])); if nops(Lnext)=nops(Lprev) then break fi; Lprev:=Lnext; fi; od; return Lnext; end: # _Walter Kehowski_, Jun 05 2008; typo fixed by _Robert Israel_, Nov 19 2014
# Alternative
A000959List := proc(mx) local i, L, n, r;
L:= [seq(2*i+1, i=0..mx)]:
for n from 2 while n < nops(L) do
  r:= L[n];
  L:= subsop(seq(r*i=NULL, i=1..nops(L)/r), L);
od: L end:
A000959List(10^3); # _Robert Israel_, Nov 19 2014
```
## Mathematica
```Mathematica
luckies = 2*Range@200 - 1; f[n_] := Block[{k = luckies[[n]]}, luckies = Delete[luckies, Table[{k}, {k, k, Length@luckies, k}]]]; Do[f@n, {n, 2, 30}]; luckies (* _Robert G. Wilson v_, May 09 2006 *)
```
```Mathematica
sieveMax = 10^6; luckies = Range[1, sieveMax, 2]; sieve[n_] := Module[{k = luckies[[n]]}, luckies = Delete[luckies, Table[{i}, {i, k, Length[luckies], k}]]]; n = 1; While[luckies[[n]] < Length[luckies], n++; sieve[n]]; luckies
```
```Mathematica
L = Table[2*i + 1, {i, 0, 10^3}]; For[n = 2, n < Length[L], r = L[[n++]]; L = ReplacePart[L, Table[r*i -> Nothing, {i, 1, Length[L]/r}]]]; L (* _Jean-Fran√ßois Alcover_, Mar 15 2016, after _Robert Israel_ *)
```
## Haskell
```Haskell
a000959 n = a000959_list !! (n-1)
a000959_list =  1 : sieve 2 [1,3..] where
   sieve k xs = z : sieve (k + 1) (lucky xs) where
      z = xs !! (k - 1 )
      lucky ws = us ++ lucky vs where
            (us, _:vs) = splitAt (z - 1) ws
-- _Reinhard Zumkeller_, Dec 05 2011
```
## C++
```C++
// See Wilson link, Nov 14 2012
```
## PARI
```PARI
A000959_upto(nMax)={my(v=vectorsmall(nMax\2,k,2*k-1),i=1,q);while(v[i++]<=#v,v=vecextract(v,2^#v-1-(q=1<<v[i])^(#v\v[i])\(q-1)<<(v[i]-1) ));v} \\ _M. F. Hasler_, Sep 22 2013, improved Jan 20 2020
```
## Python
```Python
def lucky(n):
    L = list(range(1, n + 1, 2))
    j = 1
    while j <= len(L) - 1 and L[j] <= len(L):
        del L[L[j]-1::L[j]]
        j += 1
    return L
# _Robert FERREOL_, Nov 19 2014, corrected by _F. Chapoton_, Mar 29 2020, performance improved by _Ely Golden_, Aug 18 2022
```
## Scheme
```Scheme
(define (A000959 n) ((rowfun_n_for_A000959sieve n) n)) ;; Code for rowfun_n_for_A000959sieve given in A255543.
;; _Antti Karttunen_, Feb 26 2015
```
