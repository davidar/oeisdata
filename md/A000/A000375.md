# Topswops \(1\): start by shuffling n cards labeled 1\.\.n\. If top card is m, reverse order of top m cards, then repeat\. a\(n\) is the maximal number of steps before top card is 1\.
https://oeis.org/A000375
## JSON
```JSON
[0, 1, 2, 4, 7, 10, 16, 22, 30, 38, 51, 65, 80, 101, 113, 139, 159, 191, 221]
```
## Mathematica
```Mathematica
Table[Max@ Map[Length@ NestWhileList[Flatten@{Reverse@Take[#, First@ #], Take[#, -(Length@ # - First@ #)]} &, #, First@ # != 1 &] - 1 &, Permutations@ Range@ n], {n, 8}] (* _Michael De Vlieger_, Oct 08 2016 *)
```
## PARI
```PARI
a(n)=my(s,t,v);for(i=1,n!,v=numtoperm(n,i);t=0;while(v[1]>1,v=if(v[1]<n,concat(Vecrev(v[1..v[1]]),v[v[1]+1..n]),Vecrev(v));t++);s=max(s,t));s \\ _Charles R Greathouse IV_, Oct 14 2013
```
## Python
```Python
from itertools import permutations as P
def ts(d, var=1): # algorithm VARiation
  s, m = 0, d[0]
  while m != 1:
    d = (d[:m])[::-1] + d[m:]
    s, m = s+1, d[0]
  if var==2: return s*(list(d)==sorted(d))
  return s
def a(n):
  return max(ts(d) for d in P(range(1, n+1)))
print([a(n) for n in range(1, 11)]) # _Michael S. Branicky_, Dec 11 2020
```
