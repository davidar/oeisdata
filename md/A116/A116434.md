# Consider the array T\(r,c\), the number of c\-almost primes less than or equal to r^c\. This is the diagonal T\(r,r\-1\)\.
https://oeis.org/A116434
## JSON
```JSON
[0, 1, 3, 13, 90, 726, 7089, 78369, 973404, 13377156, 201443165, 3297443264, 58304208767, 1107693755122]
```
## Mathematica
```Mathematica
AlmostPrimePi[k_Integer, n_] := Module[{a, i}, a[0] = 1; If[k == 1, PrimePi[n], Sum[PrimePi[n/Times @@ Prime[Array[a, k - 1]]] - a[k - 1] + 1, Evaluate[ Sequence @@ Table[{a[i], a[i - 1], PrimePi[(n/Times @@ Prime[Array[a, i - 1]])^(1/(k - i + 1))]}, {i, k - 1}]] ]]]; (* _Eric W. Weisstein_, Feb 07 2006 *)
```
```Mathematica
Do[ Print@ AlmostPrimePi[n, (n + 1)^n], {n, 11}]
```
## Python
```Python
from math import isqrt, prod
from sympy import primerange, integer_nthroot, primepi
def A116434(n):
    def almostprimepi(n, k):
        def g(x, a, b, c, m): yield from (((d, ) for d in enumerate(primerange(b, isqrt(x//c)+1), a)) if m==2 else (((a2, b2), )+d for a2, b2 in enumerate(primerange(b, integer_nthroot(x//c, m)[0]+1), a) for d in g(x, a2, b2, c*b2, m-1)))
        return int(sum(primepi(n//prod(c[1] for c in a))-a[-1][0] for a in g(n, 0, 1, 1, k)) if k>1 else primepi(n))
    return almostprimepi((n+1)**n,n) # _Chai Wah Wu_, Sep 02 2024
```
