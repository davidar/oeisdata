# Number of permutations of the multiset \{1,1,1,2,2,2,3,3,3,\.\.\.,n,n,n\} with no two consecutive terms equal\.
https://oeis.org/A193638
## JSON
```JSON
[1, 0, 2, 174, 41304, 19606320, 16438575600, 22278418248240, 45718006789687680, 135143407245840698880, 553269523327347306412800, 3039044104423605600086688000, 21819823367694505460651694873600, 200345011881335747639978525387827200]
```
## Maple
```Maple
a:= proc(n) option remember; `if`(n<3, (n-1)*(3*n-2)/2,
    n*((3*n-1)*(3*n^2-5*n+4) *a(n-1) +2*(n-1)*(6*n^2-9*n-1) *a(n-2)
    -4*n*(n-1)*(n-2) *a(n-3))/(2*n-2))
    end:
seq(a(n), n=0..20);  # _Alois P. Heinz_, Jun 05 2013
```
## Mathematica
```Mathematica
a[n_]:= (1/6^n)*Sum[(n+j)!*Binomial[n, k]*Binomial[2k, j]*(-3)^(n+k-j), {j,0,2n}, {k, Ceiling[j/2], n}]; Table[a[n], {n, 0, 13}] (* _Jean-FranÃ§ois Alcover_, Jul 22 2017, after _Tani Akinari_ *)
```
## Maxima
```Maxima
a(n):= (1/6^n)*sum((n+j)!*sum(binomial(n,k)*binomial(2*k,j)* (-3)^(n+k-j), k,ceiling(j/2),n), j,0,2*n); /* _Tani Akinari_, Sep 23 2012 */
```
## Python
```Python
from sympy.core.cache import cacheit
@cacheit
def a(n): return (n-1)*(3*n-2)//2 if n<3 else n*((3*n-1)*(3*n**2 - 5*n + 4)*a(n-1) + 2*(n-1)*(6*n**2 -9*n-1)*a(n-2) - 4*n*(n-1)*(n-2)*a(n- 3))//(2*n-2)
print([a(n) for n in range(51)]) # _Indranil Ghosh_, Jul 22 2017, formula after Maple code
```
## Magma
```Magma
B:=Binomial;
f:= func< n,j | (&+[B(n,k)*B(2*k,j)*(-3)^(k-j): k in [Ceiling(j/2)..n]]) >;
A193638:= func< n | (-1/2)^n*(&+[Factorial(n+j)*f(n,j): j in [0..2*n]]) >;
[A193638(n): n in [0..30]]; // _G. C. Greubel_, Sep 22 2023
```
## Sage
```Sage
b=binomial;
def f(j,n): return sum(b(n,k)*b(2*k,j)*(-3)^(k-j) for k in range((j//2),n+1))
def A193638(n): return (-1/2)^n*sum(factorial(n+j)*f(j,n) for j in range(2*n+1))
[A193638(n) for n in range(31)] # _G. C. Greubel_, Sep 22 2023
```
