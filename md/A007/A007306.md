# Denominators of Farey tree fractions \(i\.e\., the Stern\-Brocot subtree in the range \[0,1\]\)\.
https://oeis.org/A007306
## JSON
```JSON
[1, 1, 2, 3, 3, 4, 5, 5, 4, 5, 7, 8, 7, 7, 8, 7, 5, 6, 9, 11, 10, 11, 13, 12, 9, 9, 12, 13, 11, 10, 11, 9, 6, 7, 11, 14, 13, 15, 18, 17, 13, 14, 19, 21, 18, 17, 19, 16, 11, 11, 16, 19, 17, 18, 21, 19, 14, 13, 17, 18, 15, 13, 14, 11, 7, 8, 13, 17, 16, 19, 23, 22, 17, 19, 26, 29, 25, 24]
```
## Maple
```Maple
A007306 := proc(n): if n=0 then 1 else A002487(2*n-1) fi: end: A002487 := proc(m) option remember: local a, b, n; a := 1; b := 0; n := m; while n>0 do if type(n, odd) then b := a + b else a := a + b end if; n := floor(n/2); end do; b; end proc: seq(A007306(n),n=0..77); # _Johannes W. Meijer_, Jun 05 2011
```
## Mathematica
```Mathematica
a[0] = 1; a[n_] := Sum[ Mod[ Binomial[n+k-1, 2k] , 2], {k, 0, n}]; Table[a[n], {n, 0, 77}] (* _Jean-Fran√ßois Alcover_, Dec 16 2011, after _Paul Barry_ *)
```
```Mathematica
a[0] = 0; a[1] = 1;
```
```Mathematica
Flatten[{1,Table[a[2*n] = a[n]; a[2*n + 1] = a[n] + a[n + 1], {n, 0, 50}]}] (* _Horst H. Manninger_, Jun 09 2021 *)
```
## PARI
```PARI
{a(n) = if( n<1, n==0, n--; sum( k=0, n, binomial( n+k, n-k)%2))};
```
```PARI
{a(n) = my(m); if( n<2, n>=0, m = 2^length( binary( n-1)); a(n - m/2) + a(m-n+1))}; /* _Michael Somos_, May 30 2005 */
```
## Sage
```Sage
@CachedFunction
def a(n):
    return a((odd_part(n-1)+1)/2)+a((odd_part(n)+1)/2) if n>1 else 1
[a(n) for n in (0..77)] # after _Alessandro De Luca_, _Peter Luschny_, May 20 2014
```
```Sage
def A007306(n):
    if n == 0: return 1
    M = [1, 1]
    for b in (n-1).bits():
        M[b] = M[0] + M[1]
    return M[1]
print([A007306(n) for n in (0..77)]) # _Peter Luschny_, Nov 28 2017
```
## R
```R
maxrow <- 6 # by choice
a <- c(1,2)
for(m in 0:maxrow) for(k in 1:2^m){
  a[2^(m+1)+k  ] <- a[2^m+k] + a[k]
  a[2^(m+1)-k+1] <- a[2^m+k]
}
a
# _Yosu Yurramendi_, Jan 05 2015
```
```R
# Given n, compute directly a(n)
# by taking into account the binary representation of n-1
# aa <- function(n){
  b <- as.numeric(intToBits(n))
  l <- sum(b)
  m <- which(b == 1)-1
  d <- 1
  if(l > 1) for(j in 1:(l-1)) d[j] <- m[j+1]-m[j]+1
  f <- c(1,m[1]+2) # In A002487: f <- c(0,1)
  if(l > 1) for(j in 3:(l+1)) f[j] <- d[j-2]*f[j-1]-f[j-2]
  return(f[l+1])
}
# a(0) = 1, a(1) = 1, a(n) = aa(n-1)   n > 1
#
# Example
n <- 73
aa(n-1)
#
# _Yosu Yurramendi_, Dec 15 2016
```
## Scheme
```Scheme
(define (A007306 n) (if (zero? n) 1 (A002487 (+ n n -1)))) ;; Code for A002487 given in that entry. - _Antti Karttunen_, Mar 21 2017
```
## Python
```Python
from sympy import binomial
def a(n):
    return 1 if n<1 else sum(binomial(n + k - 1, 2*k) % 2 for k in range(n + 1))
print([a(n) for n in range(101)]) # _Indranil Ghosh_, Mar 22 2017
```
```Python
from functools import reduce
def A007306(n): return sum(reduce(lambda x,y:(x[0],sum(x)) if int(y) else (sum(x),x[1]),bin((n<<1)-1)[-1:2:-1],(1,0))) if n else 1 # _Chai Wah Wu_, May 18 2023
```
## Magma
```Magma
[1] cat [&+[Binomial(n+k,2*k) mod 2: k in [0..n]]: n in [0..80]]; // _Vincenzo Librandi_, Jun 10 2019
```
