# Reve's puzzle: number of moves needed to solve the Towers of Hanoi puzzle with 4 pegs and n disks, according to the Frame\-Stewart algorithm\.
https://oeis.org/A007664
## JSON
```JSON
[0, 1, 3, 5, 9, 13, 17, 25, 33, 41, 49, 65, 81, 97, 113, 129, 161, 193, 225, 257, 289, 321, 385, 449, 513, 577, 641, 705, 769, 897, 1025, 1153, 1281, 1409, 1537, 1665, 1793, 2049, 2305, 2561, 2817, 3073, 3329, 3585, 3841, 4097, 4609, 5121, 5633]
```
## Maple
```Maple
A007664:=proc(n) option remember;min(seq(2*A007664(k)+2^(n-k)-1,k=0..n-1)) end; A007664(0):=0; # _M. F. Hasler_, Feb 06 2008
A007664 := n -> 1 + (n - 1 - A003056(n)*(A003056(n) - 1)/2)*2^A003056(n); A003056 := n -> round(sqrt(2*n+2))-1; # _M. F. Hasler_, Feb 06 2008
```
## Mathematica
```Mathematica
a[n_] := a[n] = Min[ Table[ 2*a[k] + 2^(n-k) - 1, {k, 0, n-1}]]; a[0] = 0; Table[a[n], {n, 0, 48}] (* _Jean-FranÃ§ois Alcover_, Dec 06 2011, after _M. F. Hasler_ *)
```
```Mathematica
Join[{0},Accumulate[2^Flatten[Table[PadRight[{},n+1,n],{n,0,12}]]]] (* _Harvey P. Dale_, Jul 03 2021 *)
```
## PARI
```PARI
A007664(n) = (n - 1 - (n=A003056(n))*(n-1)/2)*2^n +1
A003056(n) = (sqrt(2*n+2)-.5)\1 \\ _M. F. Hasler_, Feb 06 2008
```
```PARI
print_7664(n,s=0,t=1,c=1,d=1)=while(n-->=0,print1(s+=t,",");c--&next;c=d++;t<<=1)
```
```PARI
A007664(n,c=1,d=1,t=1)=sum(i=c,n,i>c&(t<<=1)&c+=d++;t) \\ _M. F. Hasler_, Feb 06 2008
```
## Haskell
```Haskell
a007664 = sum . map (a000079 . a003056) . enumFromTo 0 . subtract 1
-- _Reinhard Zumkeller_, Feb 17 2013
```
## Python
```Python
from math import isqrt
def A007664(n): return (1<<(r:=(k:=isqrt(m:=n+1<<1))+int(m>=k*(k+1)+1)-1))*(n-1-(r*(r-1)>>1))+1 # _Chai Wah Wu_, Oct 17 2022
```
