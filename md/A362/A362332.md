# For n \> 1, if n appears in the sequence then a\(n\) \= lastindex\(n\), where lastindex\(n\) is the index of the last appearance of n\. Otherwise a\(n\+1\) \= a\(n\)/\(n\+1\) if \(n\+1\)\|a\(n\), otherwise a\(n\)\*\(n\+1\), a\(1\) \= 1 and a\(2\) \= 1\*2\.
https://oeis.org/A362332
## JSON
```JSON
[1, 2, 6, 24, 120, 3, 21, 168, 1512, 15120, 166320, 13860, 180180, 12870, 858, 13728, 233376, 4200768, 79814592, 1596291840, 7, 154, 3542, 4, 100, 2600, 70200, 1965600, 57002400, 1900080, 58902480, 1884879360, 62201018880]
```
## Mathematica
```Mathematica
nn = 33; c[_] := 0; Array[Set[{a[#], c[#]}, {#, #}] &, 2]; j = 2; Do[If[c[n] > 0, Set[k, c[n]], If[Divisible[j, n], Set[k, j/n], Set[k, j*n]]]; Set[{a[n], c[k], j}, {k, n, k}], {n, 3, nn}]; Array[a, nn] (* _Michael De Vlieger_, Jun 23 2023 *)
```
## PARI
```PARI
pos(n, va) = for (k=1, #va, if (va[k] == n, return (k)););
lista(nn) = my(va = vector(nn)); for (n=1, 2, va[n] = n); for (n=3, nn, my(p=pos(n, va)); if (p, va[n] = p, if (va[n-1] % n, va[n] = n*va[n-1], va[n] = va[n-1]/n); ); ); va; \\ _Michel Marcus_, Jun 23 2023
```
## Python
```Python
from itertools import count, islice
def A362332_gen(): # generator of terms
    a, ndict = 2, {1:1,2:2}
    yield from [1,2]
    for n in count(3):
        yield (a:= ndict[n] if n in ndict else (a*n if a%n else a//n))
        ndict[a] = n
A362332_list = list(islice(A362332_gen(),30)) # _Chai Wah Wu_, Jun 29 2023
```
